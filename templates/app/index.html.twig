{% extends 'base.html.twig' %}

{% block title %}MDS Scraper{% endblock %}

{% block body %}

    <h3>Recent</h3>
    {% for extract in lastExtract %}
        <li>
            {{ extract.token }}
            {{ extract.nextToken }}
        </li>
    {% endfor %}

    {% for class, count in counts %}
        <h3>
            {{ class }}
        </h3>
        <b>Total: {{ count }}</b>

        {% set columns = columnsByClass[class] %}
        <twig:simple_datatables
            :data="data[class]"
            :columns="columns">
            <twig:block name="source">
                {{ row.source.code }}
            </twig:block>
            <twig:block name="tokenCode">
                <span title="{{ row.token }}">{{ row.tokenCode }}</span>
            </twig:block>
            <twig:block name="nextToken">
                <span title="{{ row.nextToken }}">{{ row.nextToken|length }}</span>
            </twig:block>

        </twig:simple_datatables>
        @todo: table
    {% endfor %}
{% endblock %}
